<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hon. Gisiri Maroa | Nyabasi West MCA 2027</title>
    <meta name="description" content="Official campaign landing page for Hon. Gisiri Maroa, candidate for Nyabasi West MCA 2027. Join the movement for change, unity, and progress.">
    <link rel="icon" type="image/png" href="/Gisiri blog/blog/images/gisiri logo.jpg">
    <!-- Bootstrap 5.3 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts: Playfair Display & Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        body {
            font-family: 'Inter', 'Lato', Arial, sans-serif;
            background: linear-gradient(120deg, #181a1b 0%, #23272b 100%);
            background-image: url('/Gisiri blog/blog/images/bg-pattern.jpg');
            background-size: cover;
            background-attachment: fixed;
            min-height: 100vh;
            color: #f5f5f5;
            margin: 0;
        }
        .landing-header {
            background: rgba(26,35,62,0.98);
            box-shadow: 0 4px 24px #1a237e18;
            border-bottom: 4px solid #ffc107;
            padding: 0;
        }
        .navbar-brand {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            font-weight: 900;
            color: #ffc107 !important;
            letter-spacing: 2px;
        }
        .nav-link {
            color: #ffc107 !important;
            font-weight: 700;
            font-size: 1.1rem;
            letter-spacing: 0.07em;
        }
        .nav-link:hover {
            color: #43a047 !important;
        }
        .hero-section-landing {
            padding: 0;
            margin: 0;
            background: transparent;
        }
        .hero-content {
            background: rgba(26,35,62,0.97);
            border-radius: 32px;
            box-shadow: 0 8px 32px #1a237e44;
            padding: 48px 32px 32px 32px;
            margin-top: 48px;
            margin-bottom: 32px;
            max-width: 1100px;
            margin-left: auto;
            margin-right: auto;
        }
        .hero-title {
            font-family: 'Playfair Display', serif;
            font-size: 3.2rem;
            font-weight: 900;
            color: #ffc107;
            letter-spacing: 0.09em;
            margin-bottom: 12px;
        }
        .hero-subtitle {
            font-size: 1.5rem;
            color: #43a047;
            font-weight: 700;
            margin-bottom: 18px;
            letter-spacing: 0.04em;
        }
        .hero-message {
            font-size: 1.18rem;
            color: #f5f5f5;
            margin-bottom: 24px;
            line-height: 1.7;
            letter-spacing: 0.03em;
        }
        .hero-cta-btn {
            background: #ffc107;
            color: #181a1b;
            font-size: 1.25rem;
            font-weight: bold;
            border: none;
            border-radius: 30px;
            padding: 16px 44px;
            margin-top: 18px;
            margin-bottom: 16px;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
            box-shadow: 0 4px 18px rgba(67,160,71,0.13);
            letter-spacing: 0.08em;
        }
        .hero-cta-btn:hover {
            background: #43a047;
            color: #fff;
        }
        .carousel-img {
            width: 100vw;
            max-width: 100vw;
            height: 480px;
            object-fit: cover;
            border-radius: 0;
            box-shadow: 0 4px 24px #1a237e22;
        }
        .carousel-inner {
            border-radius: 0;
        }
        .carousel-caption {
            background: rgba(26,35,126,0.85);
            color: #ffc107;
            border-radius: 0 0 18px 18px;
            padding: 18px 24px;
            font-family: 'Playfair Display', serif;
            font-size: 1.25rem;
            font-weight: 700;
            letter-spacing: 0.05em;
            text-shadow: 1px 1px 8px #181a1b;
        }
        .about-section {
            background: rgba(26,35,62,0.97);
            border-radius: 24px;
            box-shadow: 0 4px 24px #1a237e44;
            margin: 32px auto;
            max-width: 1100px;
            padding: 36px 32px;
        }
        .about-title {
            font-family: 'Playfair Display', serif;
            color: #ffc107;
            font-size: 2.1rem;
            font-weight: 800;
            margin-bottom: 18px;
            letter-spacing: 0.07em;
        }
        .about-list {
            font-size: 1.13rem;
            color: #f5f5f5;
            margin-bottom: 0;
            line-height: 1.7;
        }
        .about-list i {
            color: #43a047;
            margin-right: 8px;
        }
        .pillars-section {
            background: rgba(33,33,33,0.98);
            border-radius: 24px;
            box-shadow: 0 4px 24px #ffc10733;
            margin: 32px auto;
            max-width: 1100px;
            padding: 36px 32px;
        }
        .pillars-title {
            font-family: 'Playfair Display', serif;
            color: #ffc107;
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 18px;
            letter-spacing: 0.07em;
        }
        .pillar-card {
            background: #23272b;
            border-left: 6px solid #43a047;
            border-radius: 12px;
            padding: 24px 18px;
            margin-bottom: 18px;
            box-shadow: 0 2px 8px #43a04711;
            min-height: 120px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
        }
        .pillar-icon {
            font-size: 2.2rem;
            margin-top: 2px;
        }
        .pillar-content {
            flex: 1;
        }
        .pillar-title {
            font-size: 1.18rem;
            font-weight: bold;
            color: #ffc107;
            margin-bottom: 6px;
        }
        .pillar-desc {
            font-size: 1.05rem;
            color: #f5f5f5;
        }
        .footer-landing {
            background: #181a1b;
            color: #ffc107;
            text-align: center;
            padding: 22px 0 12px 0;
            font-size: 1.1rem;
            margin-top: 44px;
            letter-spacing: 0.07em;
        }
        .footer-landing a {
            color: #43a047;
            text-decoration: none;
            margin: 0 8px;
        }
        .footer-landing a:hover {
            text-decoration: underline;
        }
        /* Check-in overlay styles */
        #checkinOverlay {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: 20000;
            background: rgba(26,35,62,0.98);
            backdrop-filter: blur(6px);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #checkinOverlay .card {
            background: #23272b !important;
            color: #ffc107;
            border-radius: 18px;
            box-shadow: 0 8px 32px #1a237e44;
        }
        #checkinOverlay label, #checkinOverlay .form-label {
            color: #ffc107;
        }
        #areaNamesScroller {
            display: flex;
            overflow-x: auto;
            gap: 12px;
            padding: 8px 0 8px 0;
            scrollbar-width: thin;
            scroll-behavior: smooth;
        }
        #areaNamesScroller::-webkit-scrollbar {
            height: 8px;
        }
        #areaNamesScroller::-webkit-scrollbar-thumb {
            background: #ffc107;
            border-radius: 8px;
        }
        #areaNamesScroller {
            scrollbar-color: #ffc107 #23272b;
        }
        #checkinOverlay .form-control {
            background: #181a1b;
            color: #ffc107;
            border: 1.5px solid #ffc107;
        }
        #checkinOverlay .form-control:focus {
            background: #23272b;
            color: #ffc107;
            border-color: #43a047;
        }
        #areaDropdownModal .list-group-item {
            background: #23272b;
            color: #ffc107;
            border: none;
        }
        #areaDropdownModal .list-group-item.active {
            background: #43a047;
            color: #fff;
        }
        #checkinModalBtn {
            background: #ffc107;
            color: #181a1b;
            font-weight: 700;
            letter-spacing: 0.08em;
            border: none;
        }
        #checkinModalBtn:hover {
            background: #43a047;
            color: #fff;
        }
        #checkinModalBarContainer h6 {
            color: #ffc107;
        }
        #checkinModalTotal {
            color: #43a047;
            font-weight: 700;
        }
        .checkin-bar-section {
            background: #23272b;
            border-radius: 18px;
            box-shadow: 0 4px 24px #1a237e44;
            margin: 32px auto;
            max-width: 1100px;
            padding: 24px 18px;
        }
        .checkin-bar-section .section-title {
            color: #ffc107;
            font-size: 1.3rem;
            font-family: 'Playfair Display', serif;
            font-weight: 700;
        }
        .checkin-bar-section .section-content {
            color: #f5f5f5;
        }
        @media (max-width: 900px) {
            .hero-content, .about-section, .pillars-section, .checkin-bar-section { padding: 18px 6px; }
            .carousel-img { height: 220px; }
        }
        @media (max-width: 700px) {
            .hero-title { font-size: 1.5rem; }
            .carousel-img { height: 140px; }
            .about-title, .pillars-title { font-size: 1.1rem; }
        }
    </style>
</head>
<body>
    <!-- Check-in Modal Overlay -->
    <div id="checkinOverlay">
        <div class="card shadow-lg p-4" style="max-width:900px;width:98vw;">
            <div class="card-body text-center">
                <h2 class="mb-3" style="font-family:'Playfair Display',serif;font-weight:800;letter-spacing:0.09em;color:#ffc107;">
                    <img src="/Gisiri blog/blog/images/gisiri logo.jpg" alt="icon" style="width:32px;height:32px;vertical-align:middle;margin-right:8px;">
                    Check In to Continue
                </h2>
                <p class="mb-4" style="font-size:1.18rem;letter-spacing:0.04em;color:#fff;">Please select your polling area to access the site.<br><span style="color:#43a047;font-weight:700;">We are growing....</span></p>
                <div class="mb-3">
                    <label for="areaSelectModal" class="form-label" style="font-weight:700;">Polling Area</label>
                    <div class="position-relative" style="max-width:860px;margin:0 auto;">
                        <div id="areaNamesScroller">
                            <!-- Area names will be injected here -->
                        </div>
                        <input type="text" class="form-control mt-3" id="areaSelectModalInput" placeholder="Type or select your area..." autocomplete="off" readonly style="cursor:pointer;" />
                        <div id="areaDropdownModal" class="list-group position-absolute w-100 shadow" style="display:none;max-height:320px;overflow-y:auto;z-index:10;"></div>
                    </div>
                </div>
                <button class="btn" id="checkinModalBtn">Check In</button>
                <div id="checkinModalMsg" class="mt-3"></div>
                <div class="mt-4" id="checkinModalBarContainer" style="display:none;">
                    <h6 style="font-weight:700;letter-spacing:0.07em;">Check-In Results</h6>
                    <canvas id="areaBarChartModal" height="220"></canvas>
                    <div class="mt-2" id="checkinModalTotal"></div>
                </div>
            </div>
        </div>
    </div>
    <header class="landing-header">
        <nav class="navbar navbar-expand-lg navbar-light">
            <div class="container">
                <a class="navbar-brand" href="#">Hon. Gisiri Maroa</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
                        <li class="nav-item"><a class="nav-link" href="#pillars">Pillars</a></li>
                        <li class="nav-item"><a class="nav-link" href="#gallery">Gallery</a></li>
                        <li class="nav-item"><a class="nav-link" href="#join">Join</a></li>
                        <li class="nav-item"><a class="nav-link" href="/Gisiri blog/blog.html/blog.html">Blog</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero-section-landing">
        <div class="container hero-content text-center">
            <div class="row align-items-center">
                <div class="col-lg-5 mb-4 mb-lg-0">
                    <img src="/Gisiri blog/blog/images/gisiri logo.jpg" alt="Hon. Gisiri Maroa" class="img-fluid rounded-circle shadow-lg" style="width: 260px; height: 260px; object-fit: cover; border: 8px solid #ffc107;">
                </div>
                <div class="col-lg-7 text-lg-start text-center">
                    <div class="hero-title">Hon. Gisiri Maroa</div>
                    <div class="hero-subtitle">Nyabasi West MCA 2027 Candidate</div>
                    <div class="hero-message">
                        <b>Resilient. Determined. Ready for Change.</b><br>
                        <span>
                            I am committed to a new dawn for Nyabasi West—where every family thrives, every youth is empowered, and every farmer prospers. Together, let's build a future of dignity, opportunity, and hope for all.
                        </span>
                    </div>
                    <a href="/Gisiri blog/blog.html/blog.html" class="hero-cta-btn">
                        <i class="bi bi-arrow-right-circle-fill"></i> Visit Our Blog
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Carousel Gallery -->
    <section id="gallery" class="container-fluid my-4 px-0">
        <div id="carouselGisiri" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner rounded-0 shadow">
                <div class="carousel-item active">
                    <img src="/Gisiri blog/blog/images/karokerario.jpg" class="carousel-img" alt="Gisiri Maroa with community">
                    <div class="carousel-caption d-none d-md-block">
                        With the people, for the people.
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="/Gisiri blog/blog/images/extension.jpg" class="carousel-img" alt="Gisiri Maroa campaign event">
                    <div class="carousel-caption d-none d-md-block">
                        Campaigning for unity and progress.
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="/Gisiri blog/blog/images/picture3.jpg" class="carousel-img" alt="Gisiri Maroa youth empowerment">
                    <div class="carousel-caption d-none d-md-block">
                        Empowering youth for a brighter tomorrow.
                    </div>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselGisiri" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselGisiri" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </section>

    <!-- Check-in Bar Section (after carousel, before about) -->
    <section id="checkinBarSection" class="checkin-bar-section" style="display:none;">
        <div class="section-title mb-2">We are growing....</div>
        <div class="section-content text-center">
            <div id="checkinTotal" class="mb-3" style="font-size:1.25rem;font-weight:700;color:#43a047;"></div>
            <div class="d-flex justify-content-center">
                <div style="max-width:900px;width:100%;overflow-x:auto;">
                    <canvas id="areaBarChart" height="320"></canvas>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about-section">
        <div class="about-title mb-3">
            <i class="bi bi-person-badge-fill" style="color:#43a047;margin-right:10px;"></i>
            Who is Hon. Gisiri Maroa?
        </div>
        <ul class="about-list list-unstyled">
            <li><i class="bi bi-check-circle-fill"></i> Grassroots leader, community mobilizer, and champion for the people of Nyabasi West.</li>
            <li><i class="bi bi-check-circle-fill"></i> Advocate for poverty eradication, youth empowerment, and agricultural transformation.</li>
            <li><i class="bi bi-check-circle-fill"></i> Committed to transparency, accountability, and servant leadership.</li>
            <li><i class="bi bi-check-circle-fill"></i> Driven by a vision of unity, dignity, and sustainable progress for all.</li>
        </ul>
    </section>

    <!-- Pillars Section -->
    <section id="pillars" class="pillars-section">
        <div class="pillars-title mb-4">
            <i class="bi bi-stars" style="color:#ffc107;margin-right:10px;"></i>
            Our Campaign Pillars
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="pillar-card">
                    <span class="pillar-icon"><i class="bi bi-lightning-charge-fill" style="color:#ffc107;"></i></span>
                    <div class="pillar-content">
                        <div class="pillar-title">Change That Matters</div>
                        <div class="pillar-desc">
                            Real, measurable change—better roads, quality healthcare, and action over promises.
                        </div>
                    </div>
                </div>
                <div class="pillar-card">
                    <span class="pillar-icon"><i class="bi bi-people-fill" style="color:#43a047;"></i></span>
                    <div class="pillar-content">
                        <div class="pillar-title">Poverty Eradication</div>
                        <div class="pillar-desc">
                            No family should go hungry. Targeted social programs, youth empowerment, and microfinance for every household.
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="pillar-card">
                    <span class="pillar-icon"><i class="bi bi-flower1" style="color:#1a237e;"></i></span>
                    <div class="pillar-content">
                        <div class="pillar-title">Agricultural Revolution</div>
                        <div class="pillar-desc">
                            Supporting farmers with training, inputs, irrigation, and market linkages for higher yields and incomes.
                        </div>
                    </div>
                </div>
                <div class="pillar-card">
                    <span class="pillar-icon"><i class="bi bi-chat-dots-fill" style="color:#ff9800;"></i></span>
                    <div class="pillar-content">
                        <div class="pillar-title">Voter Engagement</div>
                        <div class="pillar-desc">
                            Your voice matters! We use scientific analysis and digital tools to listen, learn, and act on your needs.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Join/Call to Action Section -->
    <section id="join" class="about-section text-center">
        <div class="about-title mb-3">
            <i class="bi bi-people" style="color:#1a237e;margin-right:10px;"></i>
            Join the Movement
        </div>
        <div class="mb-4" style="font-size:1.18rem;">
            Be part of the change! Volunteer, share your ideas, or support Hon. Gisiri Maroa's campaign for a better Nyabasi West.
        </div>
        <a href="/Gisiri blog/blog.html/blog.html" class="hero-cta-btn">
            <i class="bi bi-arrow-right-circle-fill"></i> Go to Blog
        </a>
        <div class="mt-4">
            <a href="mailto:gisirimaroa2027@gmail.com" class="me-3 text-decoration-none" style="color:#1a237e;font-weight:600;">
                <i class="bi bi-envelope-fill"></i> Email
            </a>
            <a href="tel:+254700000000" class="me-3 text-decoration-none" style="color:#1a237e;font-weight:600;">
                <i class="bi bi-telephone-fill"></i> Call
            </a>
            <a href="/Gisiri blog/blog.html/blog.html" class="text-decoration-none" style="color:#43a047;font-weight:600;">
                <i class="bi bi-globe"></i> Blog
            </a>
        </div>
    </section>

    <footer class="footer-landing">
        &copy; 2024 Hon. Gisiri Maroa for Nyabasi West MCA. All Rights Reserved.<br>
        <a href="/Gisiri blog/blog.html/blog.html">Visit Our Blog</a>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script>
    // --- Check-in Feature Data ---
    const pollingAreas = [
        "Bitorogwe","Chinato","Gibarori","Itacho","Kebare","Kebarisia","Kebaroti","Kegonche","Kemakoba","Kendege","Kionyo","Komotobo","Kwiyegani","Maeta","Mosaro","Musweto","Ngibunyi","Nyabikongori","Nyabosongo","Nyaitara","Nyametaburo/Komorama","Nyamutiro","Nyaroha","Remanyanki","Sanchawa","Senta","Tebesi"
    ].sort((a, b) => a.localeCompare(b));
    let areaCounts = {};
    pollingAreas.forEach(area => areaCounts[area] = 0);
    // Use sessionStorage for per-session check-in
    if (sessionStorage.getItem('areaCounts')) {
        try {
            const saved = JSON.parse(sessionStorage.getItem('areaCounts'));
            pollingAreas.forEach(area => {
                if (saved[area] !== undefined) areaCounts[area] = saved[area];
            });
        } catch {}
    }

    // --- Check-in Modal Logic ---
    const areaInputModal = document.getElementById('areaSelectModalInput');
    const areaDropdownModal = document.getElementById('areaDropdownModal');
    const checkinModalBtn = document.getElementById('checkinModalBtn');
    const checkinModalMsg = document.getElementById('checkinModalMsg');
    const checkinOverlay = document.getElementById('checkinOverlay');
    const checkinModalBarContainer = document.getElementById('checkinModalBarContainer');
    const checkinModalTotal = document.getElementById('checkinModalTotal');
    const areaNamesScroller = document.getElementById('areaNamesScroller');
    let selectedAreaModal = "";

    // Render all area names horizontally
    function renderAreaNamesScroller() {
        areaNamesScroller.innerHTML = '';
        pollingAreas.forEach(area => {
            const btn = document.createElement('button');
            btn.type = "button";
            btn.className = "btn btn-outline-warning btn-sm";
            btn.style = "min-width:120px;font-weight:700;letter-spacing:0.05em;border-radius:18px;color:#ffc107;border:2px solid #ffc107;background:#23272b;";
            btn.textContent = area;
            btn.onclick = function() {
                areaInputModal.value = area;
                selectedAreaModal = area;
                // Scroll to center the selected button
                const rect = btn.getBoundingClientRect();
                const parentRect = areaNamesScroller.getBoundingClientRect();
                areaNamesScroller.scrollLeft += rect.left - parentRect.left - parentRect.width/2 + rect.width/2;
            };
            areaNamesScroller.appendChild(btn);
        });
    }
    renderAreaNamesScroller();

    // Show dropdown with slow scroll animation (2s)
    areaInputModal.addEventListener('click', function() {
        areaDropdownModal.innerHTML = '';
        pollingAreas.forEach((area, idx) => {
            const item = document.createElement('button');
            item.type = "button";
            item.className = "list-group-item list-group-item-action";
            item.textContent = area;
            item.style.transition = "background 0.2s";
            item.onclick = function() {
                areaInputModal.value = area;
                selectedAreaModal = area;
                areaDropdownModal.style.display = "none";
            };
            areaDropdownModal.appendChild(item);
        });
        areaDropdownModal.style.display = "block";
        // Animate highlight scroll (2s total)
        let i = 0;
        function highlightNext() {
            if (i > 0) areaDropdownModal.children[i-1].classList.remove('active');
            if (i < areaDropdownModal.children.length) {
                areaDropdownModal.children[i].classList.add('active');
                areaDropdownModal.scrollTop = areaDropdownModal.children[i].offsetTop - areaDropdownModal.offsetTop;
                i++;
                setTimeout(highlightNext, 2000 / areaDropdownModal.children.length); // ~2s total
            } else {
                setTimeout(() => {
                    Array.from(areaDropdownModal.children).forEach(c => c.classList.remove('active'));
                }, 400);
            }
        }
        highlightNext();
    });
    // Allow typing to filter
    areaInputModal.removeAttribute('readonly');
    areaInputModal.addEventListener('input', function() {
        const val = areaInputModal.value.toLowerCase();
        areaDropdownModal.innerHTML = '';
        pollingAreas.filter(a => a.toLowerCase().includes(val)).forEach(area => {
            const item = document.createElement('button');
            item.type = "button";
            item.className = "list-group-item list-group-item-action";
            item.textContent = area;
            item.onclick = function() {
                areaInputModal.value = area;
                selectedAreaModal = area;
                areaDropdownModal.style.display = "none";
            };
            areaDropdownModal.appendChild(item);
        });
        areaDropdownModal.style.display = areaDropdownModal.children.length ? "block" : "none";
    });
    // Hide dropdown on outside click
    document.addEventListener('click', function(e) {
        if (!areaDropdownModal.contains(e.target) && e.target !== areaInputModal) {
            areaDropdownModal.style.display = "none";
        }
    });

    // Modal Bar Chart
    let barChartModal = null;
    function renderBarChartModal() {
        const ctx = document.getElementById('areaBarChartModal').getContext('2d');
        const data = {
            labels: pollingAreas,
            datasets: [{
                label: 'Check-Ins',
                data: pollingAreas.map(a => areaCounts[a]),
                backgroundColor: '#ffc107cc',
                borderColor: '#43a047',
                borderWidth: 2,
                borderRadius: 6,
                maxBarThickness: 36
            }]
        };
        if (barChartModal) {
            barChartModal.data = data;
            barChartModal.update();
        } else {
            barChartModal = new Chart(ctx, {
                type: 'bar',
                data,
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    plugins: {
                        legend: { display: false },
                        title: { display: false }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: { color: '#ffc107', font: { size: 16, weight: 'bold' } }
                        },
                        y: {
                            ticks: { color: '#ffc107', font: { size: 16, weight: 'bold' } }
                        }
                    }
                }
            });
        }
        // Show total
        const total = pollingAreas.reduce((sum, a) => sum + areaCounts[a], 0);
        checkinModalTotal.innerHTML = `<span style="color:#43a047;font-weight:700;">${total} already people checked in</span>`;
    }
    renderBarChartModal();

    // Check-in logic
    checkinModalBtn.onclick = function() {
        const area = areaInputModal.value.trim();
        if (!pollingAreas.includes(area)) {
            checkinModalMsg.innerHTML = '<span class="text-danger">Please select a valid polling area.</span>';
            return;
        }
        areaCounts[area] = (areaCounts[area] || 0) + 1;
        sessionStorage.setItem('areaCounts', JSON.stringify(areaCounts));
        sessionStorage.setItem('checkedInArea', area);
        checkinModalMsg.innerHTML = `<span class="text-success">Thank you for checking in for <b>${area}</b>!</span>`;
        checkinModalBarContainer.style.display = "block";
        renderBarChartModal();
        setTimeout(() => {
            // Hide overlay, show main bar
            checkinOverlay.style.display = "none";
            document.getElementById('checkinBarSection').style.display = "";
            renderBarChart();
        }, 1200);
    };

    // Main page bar chart
    let barChart = null;
    function renderBarChart() {
        const ctx = document.getElementById('areaBarChart').getContext('2d');
        const data = {
            labels: pollingAreas,
            datasets: [{
                label: 'Check-Ins',
                data: pollingAreas.map(a => areaCounts[a]),
                backgroundColor: '#ffc107cc',
                borderColor: '#43a047',
                borderWidth: 2,
                borderRadius: 6,
                maxBarThickness: 36
            }]
        };
        if (barChart) {
            barChart.data = data;
            barChart.update();
        } else {
            barChart = new Chart(ctx, {
                type: 'bar',
                data,
                options: {
                    indexAxis: 'x',
                    responsive: true,
                    plugins: {
                        legend: { display: false },
                        title: { display: false }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#ffc107', font: { size: 16, weight: 'bold' } }
                        },
                        y: {
                            beginAtZero: true,
                            ticks: { color: '#ffc107', font: { size: 16, weight: 'bold' } }
                        }
                    }
                }
            });
        }
        // Show total
        const total = pollingAreas.reduce((sum, a) => sum + areaCounts[a], 0);
        document.getElementById('checkinTotal').innerHTML = `${total} already people checked in`;
    }
    // Only show bar after check-in
    if (sessionStorage.getItem('checkedInArea')) {
        document.getElementById('checkinBarSection').style.display = "";
        renderBarChart();
        document.getElementById('checkinOverlay').style.display = "none";
    }

    // Reset check-in on session end (handled by sessionStorage)
    // If user leaves and returns, check-in required again

    // Save checked in area to prevent repeat in session
    checkinModalBtn.addEventListener('click', function() {
        const area = areaInputModal.value.trim();
        if (pollingAreas.includes(area)) {
            sessionStorage.setItem('checkedInArea', area);
        }
    });
    </script>
</body>
</html>
